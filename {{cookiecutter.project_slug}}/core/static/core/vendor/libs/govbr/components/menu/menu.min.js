!function e(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define("core",[],s):"object"==typeof exports?exports.core=s():t.core=s()}(self,(()=>(()=>{var e={};return(()=>{class e{constructor(e,t){this.name=e,this.component=t,this.id=this.component.id,this.breakpoints=this.component.dataset.breakpoints?this.component.dataset.breakpoints.split(" "):["col-sm-4","col-lg-3"],this.pushShadow="shadow-lg-right",this.trigger=document.querySelector(`[data-target="#${this.id}"]`),this.contextual=this.component.querySelector('[data-toggle="contextual"]'),this.dismiss=this.component.querySelectorAll('[data-dismiss="menu"]'),this.scrim=this.component.querySelector(".menu-scrim"),this.componentFolders=this.component.querySelectorAll(".menu-folder"),this.componentItems=this.component.querySelectorAll(".menu-item"),this._setBehavior()}_setBehavior(){this._toggleMenu(),this._setDropMenu(),this._setSideMenu(),this._setKeyboardBehaviors(),this._setBreakpoints(),this._setView(),window.addEventListener("resize",(()=>{this._setView()}))}_setView(){const e=document.querySelector("body"),t=undefined;document.querySelector(".menu-trigger")&&window.innerWidth<992?e.classList.add("mb-5"):e.classList.remove("mb-5")}_setBreakpoints(){this.component.classList.contains("push")||this.contextual||this.component.querySelector(".menu-panel").classList.add(...this.breakpoints)}_setKeyboardBehaviors(){this.component.addEventListener("keyup",(e=>{if("Escape"===e.code)this._closeMenu()})),this.scrim&&this.scrim.addEventListener("keyup",(()=>this._closeMenu()))}_toggleMenu(){const e=this.contextual?this.contextual:this.trigger;e&&e.addEventListener("click",(()=>{this.component.classList.contains("active")?this._closeMenu():(this._openMenu(),this._focusNextElement())}));for(const e of this.dismiss)e.addEventListener("click",(()=>this._closeMenu()))}_openMenu(){this.component.classList.add("active"),this.component.classList.contains("push")&&this.component.classList.add(...this.breakpoints,"px-0"),this.component.focus()}_closeMenu(){this.component.classList.remove("active"),this.component.classList.contains("push")&&this.component.classList.remove(...this.breakpoints,"px-0"),this._focusNextElement()}_setDropMenu(){for(const e of this.component.querySelectorAll(".menu-folder > a.menu-item"))this._createIcon(e,"fa-chevron-down"),e.parentNode.classList.add("drop-menu"),this._toggleDropMenu(e)}_focusNextElement(){const e='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])';if(document.activeElement){const t=Array.prototype.filter.call(document.body.querySelectorAll(e),(e=>e.offsetWidth>0||e.offsetHeight>0||e===document.activeElement)),s=t.indexOf(document.activeElement);if(s>-1){const e=undefined;(t[s+1]||t[0]).focus()}}}_setSideMenu(){for(const e of this.component.querySelectorAll("a.menu-item + ul"))e.parentNode.classList.contains("menu-folder")||(this._createIcon(e.previousElementSibling,"fa-angle-right"),e.parentNode.classList.add("side-menu"),this._toggleSideMenu(e.previousElementSibling))}_toggleDropMenu(e){e.hasAttribute("data-click-listener")||(e.addEventListener("click",(()=>{e.parentNode.classList.contains("active")?e.parentNode.classList.remove("active"):e.parentNode.classList.add("active")})),e.setAttribute("data-click-listener","true"))}_toggleSideMenu(e){e.hasAttribute("data-click-listener")||(e.addEventListener("click",(()=>{if(this._hideItems(e),this._showItems(e.parentNode),e.parentNode.classList.contains("active"))return this._closeSideMenu(e),void e.focus();e.parentNode.classList.add("active"),e.focus()})),e.setAttribute("data-click-listener","true"))}_closeSideMenu(e){e.parentNode.classList.remove("active");const t=e.parentNode.closest(".side-menu.active")?e.parentNode.closest(".side-menu.active"):e.closest(".menu-body");this._showItems(t)}_hideItems(e){for(const t of e.closest(".menu-body").querySelectorAll(".menu-item"))t.setAttribute("hidden","")}_showItems(e){for(const t of e.querySelectorAll(".menu-item"))t.removeAttribute("hidden")}_createIcon(e,t){if(!e.querySelectorAll("span.support").length){const s=document.createElement("span");s.classList.add("support");const o=document.createElement("i");o.classList.add("fas"),o.classList.add(t),o.setAttribute("aria-hidden","true"),s.appendChild(o),e.appendChild(s)}}}var t=null})(),e})()));
//# sourceMappingURL=menu.min.js.map