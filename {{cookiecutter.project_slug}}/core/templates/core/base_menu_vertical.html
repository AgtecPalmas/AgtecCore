{% load static %}
<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Language" content="en" />
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#4188c9">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <title>{% block title %}{% endblock title %}</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=latin-ext">
    <script src="{% static 'core/js/vendors/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'core/js/core.js' %}"></script>
    <script src="{% static 'core/js/vendors/jquery-jvectormap-2.0.3.min.js' %}"></script>
    <script src="{% static 'core/js/vendors/jquery-jvectormap-de-merc.js' %}"></script>
    <script src="{% static 'core/js/vendors/jquery-jvectormap-world-mill.js' %}"></script>
    <script src="{% static 'core/js/vendors/jquery.sparkline.min.js' %}"></script>
    <script src="{% static 'core/js/vendors/jquery.tablesorter.min.js' %}"></script>
    <script src="{% static 'core/js/vendors/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'core/js/vendors/chart.bundle.min.js' %}"></script>
    <script src="{% static 'core/js/vendors/selectize.min.js' %}"></script>
    <!-- <script src="{% static 'core/js/vendors/circle-progress.min.js' %}"></script> -->

    <!-- Dashboard Core -->
    <link href="{% static 'core/css/dashboard.css' %}" rel="stylesheet" />
    <script src="{% static 'core/js/dashboard.js' %}"></script>
    <!-- c3.js Charts Plugin -->
    <script src="{% static 'core/plugins/charts-c3/js/d3.v3.min.js' %}"></script>
    <script src="{% static 'core/plugins/charts-c3/js/c3.min.js' %}"></script>
    <link href="{% static 'core/plugins/charts-c3/plugin.css' %}" rel="stylesheet" />
    <script src="{% static 'core/plugins/charts-c3/plugin.js' %}"></script>
    <!-- Google Maps Plugin -->
    <link href="{% static 'core/plugins/maps-google/plugin.css' %}" rel="stylesheet" />
    <script src="{% static 'core/plugins/maps-google/plugin.js' %}"></script>
    <!-- Input Mask Plugin -->
    <script src="{% static 'core/plugins/input-mask/js/jquery.mask.min.js' %}"></script>
    <script src="{% static 'core/plugins/input-mask/plugin.js' %}"></script>

    <script src="{% static 'core/plugins//prismjs/js/prism.pack.js' %}"></script>

    <!-- Jquery Admin Django -->
    <script src="{% static 'core/js/jquery.formset.js' %}"></script>
    <script src="{% static 'core/js/inline.js' %}"></script>

    {% block extra_css %}{% endblock extra_css %}
    {% block extra_head %}{% endblock extra_head %}
</head>

<body class="">
    <div class="page">
        <div class="page-main">
            <!-- Show only user is logged -->
            {% if user.is_authenticated %}
            <div class="header py-4">
                <div class="container-fluid px-5">
                    <div class="d-flex">
                        <a class="header-brand" href="/core">
                            {{ system_name }}
                        </a>
                        <div class="d-flex order-lg-2 ml-auto">
                            <div class="nav-item d-none d-md-flex">

                            </div>
                            <div class="dropdown">
                                <a href="#" class="nav-link pr-0 leading-none" data-toggle="dropdown">
                                    <!--                                    <span class="avatar" style="background-image: url(./demo/faces/female/25.jpg)"></span>-->
                                    <span class="ml-2 d-none d-lg-block">
                                        <span class="text-default">{{ user.username|title }}</span>
                                        <small class="text-muted d-block mt-1">{{ user.email }}</small>
                                    </span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                    <a class="dropdown-item" href="{% url 'core:profile' %}">
                                        <i class="dropdown-icon fe fe-user"></i> Perfil
                                    </a>
                                    <a class="dropdown-item" href="{% url 'core:settings' %}">
                                        <i class="dropdown-icon fe fe-settings"></i> Settings
                                    </a>
                                    <a class="dropdown-item" href="#">
                                        <span class="float-right"><span class="badge badge-primary">6</span></span>
                                        <i class="dropdown-icon fe fe-mail"></i> Inbox
                                    </a>
                                    <a class="dropdown-item" href="#">
                                        <i class="dropdown-icon fe fe-send"></i> Message
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#">
                                        <i class="dropdown-icon fe fe-help-circle"></i> Need help?
                                    </a>
                                    <a class="dropdown-item" href="{% url 'core:logout' %}">
                                        <i class="dropdown-icon fe fe-log-out"></i> Logout
                                    </a>
                                </div>
                            </div>
                        </div>
                        <a href="#" class="header-toggler d-lg-none ml-3 ml-lg-0" data-toggle="collapse"
                            data-target="#headerMenuCollapse">
                            <span class="header-toggler-icon"></span>
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
            <!-- end block show only user is logged -->
            <div id="div_menu_and_content" class="row m-0 p-0">
                <div class="m-0 pl-0 mh-100 h-100">
                    {% include './block/vertical_menu.html' %}
                </div>
                <div id="div_block_content" class="col-10 p-5 mw-100 mh-100">
                    {% block content %} {% endblock content %}
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <div class="row align-items-center flex-row-reverse">
                    <div class="col-auto ml-lg-auto">
                        <div class="row align-items-center">
                            {% if user.last_login %}
                            Sessão iniciada: {{ user.last_login }}
                            | {{ user_ip }}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-12 col-lg-auto mt-3 mt-lg-0 text-center">
                        Copyright © 2018
                    </div>
                </div>
            </div>
        </footer>
    </div>
    {% block extra_js %}{% endblock extra_js %}
    <script>
        function applySideBarState() {
            $('#sidebar_left').addClass(window.localStorage.getItem("sidebar_active"));
        }

        function applyInitialTheme() {
            const theme = window.localStorage.getItem("site-theme")
            if (theme !== null) {
                const htmlTag = document.getElementsByTagName("html")[0]
                htmlTag.setAttribute("data-theme", theme)
            }
        }

        applyInitialTheme();
        applySideBarState();
    </script>
</body>

</html>